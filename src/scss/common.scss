$shadow: rgba(26, 26, 26, 0.6);
$accent: #f6c177;
$accent_fg: $accent;
$radii: 8px;
$bg_color: #26233a;
$fg_color: #e0def4;
$widget_bg: #26233a;
$widget_opacity: 0.8;
$hover_fg: #f1f1f1;
$hover: transparentize($widget_bg, max(($widget_opacity * 0.9) / 100, 0));
$spacing: 8px;
$border_width: 1px;
$border_color: $accent;
$border: $border_width solid $border_color;
$popover_padding: 16px;
$popover_radius: 8px;
$transition: 200ms;

window {
  background-color: transparent;
}

@mixin common {
  all: unset;
  
  * {
    font-size: 14px;
    font-family: Inter, sans-serif;
  }
}

@mixin widget {
  @include common;
  border-radius: $radii;
  color: $fg_color;
  background-color: $widget_bg;
  border: $border;
}

@mixin button_focus() {
  box-shadow: inset 0 0 0 $border_width $accent;
  background-color: $hover;
  color: $hover_fg;
}

@mixin button_hover() {
  box-shadow: inset 0 0 0 $border_width $border_color;
  background-color: $hover;
  color: $hover_fg;
}

@mixin button_active() {
  box-shadow: inset 0 0 0 $border_width $border_color;
  background-color: $accent;
  color: $accent_fg;
}

@mixin button_disabled() {
  box-shadow: none;
  background-color: transparent;
  color: transparentize($fg_color, 0.7);
}

@mixin button($flat: false, $reactive: true, $radii: $radii, $focusable: true){
  @include common;
  transition: $transition;
  border-radius: $radii;
  color: $fg_color;

  @if $flat{
    background-color: transparent;
    background-image: none;
    box-shadow: none;
  } @else{
    background-color: $widget_bg;
    box-shadow: inset 0 0 0 $border_width $border_color;
  }

  @if $reactive{
    @if $focusable {
      &:focus{
        @include button_focus;
      }
    }

    &:hover{
      @include button_hover;
    }

    &:active, &.on, &.active, &:checked {
      @include button_active;

      &:hover {
        box-shadow: inset 0 0 0 $border_width $border_color,
                    inset 0 0 0 99px $hover;
      }
    }
  }

  &:disabled {
    @include button_disabled;
  }
}

@mixin floating_widget {
  @include common;
  box-shadow: 0 0 min(6px, $spacing/2) 0 $shadow;
  margin: max($spacing, 8px);
  border: $border_width solid $accent;
  border-radius: $popover_radius;
  background-color: $bg_color;
  color: $fg_color;
  padding: $popover_padding;
}
